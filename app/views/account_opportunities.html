<div class="x_panel">
	<div class="x_title">
		<h2>Opportunity List</h2>
		<ul class="nav navbar-right panel_toolbox">
			<li>
				<a ng-click="updateOpportunities()">
					<i class="fa fa-refresh"></i>
				</a>
			</li>
		</ul>
		<div class="clearfix"></div>
	</div>
	<div class="x_content">
		<div class="col-md-12">
			<form class="form-inline">
				<div class="checkbox">
					<label>
						Show closed opportunity
						<input type="checkbox" ng-model="showClosedOpport">
					</label>
				</div>
			</form>
		</div>

		<div class="" role="tabpanel" data-example-id="togglable-tabs">
			<table class="table table-striped">
				<thead>
					<tr>
						<th>
							<a ng-click="sortType = 'CreatedDate'; sortReverse = !sortReverse">
								Created Date
								<span ng-show="sortType == 'CreatedDate' && !sortReverse" class="fa fa-caret-down"></span>
								<span ng-show="sortType == 'CreatedDate' && sortReverse" class="fa fa-caret-up"></span>
							</a>
						</th>
						<th>
							<a ng-click="sortType = 'Name'; sortReverse = !sortReverse">
								Name
								<span ng-show="sortType == 'Name' && !sortReverse" class="fa fa-caret-down"></span>
								<span ng-show="sortType == 'Name' && sortReverse" class="fa fa-caret-up"></span>
							</a>
						</th>
						<th>
							<a ng-click="sortType = 'StageName'; sortReverse = !sortReverse">
								Stage Name
								<span ng-show="sortType == 'StageName' && !sortReverse" class="fa fa-caret-down"></span>
								<span ng-show="sortType == 'StageName' && sortReverse" class="fa fa-caret-up"></span>
							</a>
						</th>
						<th>
							<a ng-click="sortType = 'Amount'; sortReverse = !sortReverse">
								Amount
								<span ng-show="sortType == 'Amount' && !sortReverse" class="fa fa-caret-down"></span>
								<span ng-show="sortType == 'Amount' && sortReverse" class="fa fa-caret-up"></span>
							</a>
						</th>
						<th>
							<a ng-click="sortType = 'ForecastCategory'; sortReverse = !sortReverse">
								Forecast Category
								<span ng-show="sortType == 'ForecastCategory' && !sortReverse" class="fa fa-caret-down"></span>
								<span ng-show="sortType == 'ForecastCategory' && sortReverse" class="fa fa-caret-up"></span>
							</a>
						</th>
						<th>
							<a ng-click="sortType = 'ForecastCategoryName'; sortReverse = !sortReverse">
								Forecast Category Name
								<span ng-show="sortType == 'ForecastCategoryName' && !sortReverse" class="fa fa-caret-down"></span>
								<span ng-show="sortType == 'ForecastCategoryName' && sortReverse" class="fa fa-caret-up"></span>
							</a>
						</th>
						<th>
							<a ng-click="sortType = 'Fiscal'; sortReverse = !sortReverse">
								Fiscal
								<span ng-show="sortType == 'Fiscal' && !sortReverse" class="fa fa-caret-down"></span>
								<span ng-show="sortType == 'Fiscal' && sortReverse" class="fa fa-caret-up"></span>
							</a>
						</th>
						<th>Team</th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="opport in opportunities | orderBy:sortType:sortReverse" ng-if="opport.IsClosed === showClosedOpport">
						<th>{{opport.CreatedDate | date}}</th>
						<td>{{opport.Name}}</td>
						<td>{{opport.StageName}}</td>
						<td>{{opport.Amount}}
							{{opport.CurrencyIsoCode}}</td>
						<td>{{opport.ForecastCategory}}</td>
						<td>{{opport.ForecastCategoryName}}</td>
						<td>{{opport.Fiscal}}</td>
						<td>
							<div ng-repeat="member in opport.OpportunityTeamMembers.records">
								{{member.Name}}
								:
								{{member.TeamMemberRole}}
							</div>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
</div>
